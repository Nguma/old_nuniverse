<% case @kind -%>
<% when 'description' -%>
  <script type="javascript">
  //<![CDATA[
     $('description_box').getElement('.content').set('text',<%= @result %>)
      inputBox.addAnotherPrompt();
  //]]> 
  </script>
    
<% when 'image' -%>
  <script type="javascript">
  //<![CDATA[
    $('image_box').set('html','<%= image_tag(@result, :class => "avatar") %>');
    inputBox.addAnotherPrompt();
  //]]> 
  </script>
    
<% when 'list' -%>
  <script type="javascript">
  //<![CDATA[
    var pl = $('content').getElements('.column .box').length % $('content').getElements('.column').length
    var el = new Element('div');
    
    el.set('html','<%= list(:source => @result).gsub(/>\s+</,'><') %>');
    $('content').adopt(el);
    inputBox.addAnotherPrompt();
  //]]> 
  </script>
    
<% when 'tag' -%>
  <script type="javascript">
  //<![CDATA[
      inputBox.addAnotherPrompt();
  //]]> 
  </script>
<% else -%>
  <% if @context_type == "List" -%>
    <script type="javascript">
    //<![CDATA[
      var pl = $('content').getElements('.column .box').length % $('content').getElements('.column').length
      var el = new Element('div');
      el.set('html','<%= render_item_box(@result).gsub(/\n/,'') %>');
      $('column_'+pl).adopt(el);
      inputBox.addAnotherPrompt();
    //]]> 
    </script>
  <% else -%>
    <script type="javascript">
    //<![CDATA[
      var el = new Element('div');
      el.set('html','<%= render_item(@result).gsub(/\n/,'') %>');
      $('<%= @kind.pluralize %>').getElement('.content').adopt(el);
      inputBox.addAnotherPrompt();
    //]]> 
    </script>
  <% end -%>

    
<% end -%>


