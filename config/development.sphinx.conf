indexer
{

}

searchd
{
  address = 127.0.0.1
  port = 3312
  log = /Users/nguma/Projects/nuniverse/log/searchd.log
  query_log = /Users/nguma/Projects/nuniverse/log/searchd.query.log
  pid_file = /Users/nguma/Projects/nuniverse/log/searchd.development.pid

}

source nuniverse_0_core
{
type     = mysql
sql_host = localhost
sql_user = nuniverse
sql_pass = wossname
sql_db   = nuniverse_dev



sql_query_pre    = SET NAMES utf8

sql_query_pre    = UPDATE `nuniverses` SET `delta` = 0
sql_query        = SELECT `nuniverses`.`id` * 4 + 0 AS `id` , CAST(`nuniverses`.`name` AS CHAR) AS `name`, IFNULL(`nuniverses`.`name`, '') AS `name_sort`, `nuniverses`.`state` AS `state`, `nuniverses`.`id` AS `sphinx_internal_id`, 4098763623 AS `class_crc`, '4098763623' AS `subclass_crcs`, 0 AS `sphinx_deleted` FROM nuniverses    WHERE `nuniverses`.`id` >= $start   AND `nuniverses`.`id` <= $end    AND `nuniverses`.`delta` = 0 GROUP BY `nuniverses`.`id`  ORDER BY NULL
sql_query_range  = SELECT MIN(`id`), MAX(`id`) FROM `nuniverses` WHERE `nuniverses`.`delta` = 0
sql_query_info   = SELECT * FROM `nuniverses` WHERE  `id` = (($id - 0) / 4)
sql_attr_str2ordinal = name_sort
  sql_attr_bool        = state
  sql_attr_uint        = sphinx_internal_id
  sql_attr_uint        = class_crc
  sql_attr_multi       = uint subclass_crcs from field
  sql_attr_uint        = sphinx_deleted

}

source nuniverse_0_delta : nuniverse_0_core
{
sql_query_pre    = 
sql_query_pre    = SET NAMES utf8

sql_query        = SELECT `nuniverses`.`id` * 4 + 0 AS `id` , CAST(`nuniverses`.`name` AS CHAR) AS `name`, IFNULL(`nuniverses`.`name`, '') AS `name_sort`, `nuniverses`.`state` AS `state`, `nuniverses`.`id` AS `sphinx_internal_id`, 4098763623 AS `class_crc`, '4098763623' AS `subclass_crcs`, 0 AS `sphinx_deleted` FROM nuniverses    WHERE `nuniverses`.`id` >= $start   AND `nuniverses`.`id` <= $end    AND `nuniverses`.`delta` = 1 GROUP BY `nuniverses`.`id`  ORDER BY NULL
sql_query_range  = SELECT MIN(`id`), MAX(`id`) FROM `nuniverses` WHERE `nuniverses`.`delta` = 1
}

index nuniverse_core
{
source = nuniverse_0_core
path = /Users/nguma/Projects/nuniverse/db/sphinx/development/nuniverse_core
  charset_type = utf-8
  morphology = stem_en
}
index nuniverse_delta : nuniverse_core
{
  source = nuniverse_0_delta
  path = /Users/nguma/Projects/nuniverse/db/sphinx/development/nuniverse_delta
}
index nuniverse
{
  type = distributed
  local = nuniverse_core
  local = nuniverse_delta
}

source polyco_0_core
{
type     = mysql
sql_host = localhost
sql_user = nuniverse
sql_pass = wossname
sql_db   = nuniverse_dev



sql_query_pre    = SET NAMES utf8

sql_query_pre    = 
sql_query        = SELECT `polycos`.`id` * 4 + 1 AS `id` , CAST(`polycos`.`name` AS CHAR) AS `name`, IFNULL(`polycos`.`name`, '') AS `name_sort`, `polycos`.`id` AS `sphinx_internal_id`, 522393089 AS `class_crc`, '522393089' AS `subclass_crcs`, 0 AS `sphinx_deleted` FROM polycos    WHERE `polycos`.`id` >= $start   AND `polycos`.`id` <= $end    GROUP BY `polycos`.`id`  ORDER BY NULL
sql_query_range  = SELECT MIN(`id`), MAX(`id`) FROM `polycos` 
sql_query_info   = SELECT * FROM `polycos` WHERE  `id` = (($id - 1) / 4)
sql_attr_str2ordinal = name_sort
  sql_attr_uint        = sphinx_internal_id
  sql_attr_uint        = class_crc
  sql_attr_multi       = uint subclass_crcs from field
  sql_attr_uint        = sphinx_deleted

}

index polyco_core
{
source = polyco_0_core
path = /Users/nguma/Projects/nuniverse/db/sphinx/development/polyco_core
  charset_type = utf-8
  morphology = stem_en
}
index polyco
{
  type = distributed
  local = polyco_core
}

source story_0_core
{
type     = mysql
sql_host = localhost
sql_user = nuniverse
sql_pass = wossname
sql_db   = nuniverse_dev



sql_query_pre    = SET NAMES utf8

sql_query_pre    = 
sql_query        = SELECT `stories`.`id` * 4 + 2 AS `id` , CAST(`stories`.`name` AS CHAR) AS `name`, IFNULL(`stories`.`name`, '') AS `name_sort`, UNIX_TIMESTAMP(`stories`.`created_at`) AS `created_at`, UNIX_TIMESTAMP(`stories`.`updated_at`) AS `updated_at`, `stories`.`id` AS `sphinx_internal_id`, 714550076 AS `class_crc`, '714550076' AS `subclass_crcs`, 0 AS `sphinx_deleted` FROM stories    WHERE `stories`.`id` >= $start   AND `stories`.`id` <= $end    GROUP BY `stories`.`id`  ORDER BY NULL
sql_query_range  = SELECT MIN(`id`), MAX(`id`) FROM `stories` 
sql_query_info   = SELECT * FROM `stories` WHERE  `id` = (($id - 2) / 4)
sql_attr_str2ordinal = name_sort
  sql_attr_timestamp   = created_at
  sql_attr_timestamp   = updated_at
  sql_attr_uint        = sphinx_internal_id
  sql_attr_uint        = class_crc
  sql_attr_multi       = uint subclass_crcs from field
  sql_attr_uint        = sphinx_deleted

}

index story_core
{
source = story_0_core
path = /Users/nguma/Projects/nuniverse/db/sphinx/development/story_core
  charset_type = utf-8
  morphology = stem_en
}
index story
{
  type = distributed
  local = story_core
}

source user_0_core
{
type     = mysql
sql_host = localhost
sql_user = nuniverse
sql_pass = wossname
sql_db   = nuniverse_dev



sql_query_pre    = SET NAMES utf8

sql_query_pre    = UPDATE `users` SET `delta` = 0
sql_query        = SELECT `users`.`id` * 4 + 3 AS `id` , CAST(`users`.`login` AS CHAR) AS `login`, CAST(CONCAT_WS(' ', `users`.`firstname`, `users`.`lastname`) AS CHAR) AS `name`, IFNULL(CONCAT_WS(' ', `users`.`firstname`, `users`.`lastname`), '') AS `name_sort`, IFNULL(`users`.`state`, '') AS `state`, `users`.`id` AS `sphinx_internal_id`, 765557111 AS `class_crc`, '765557111' AS `subclass_crcs`, 0 AS `sphinx_deleted` FROM users    WHERE `users`.`id` >= $start   AND `users`.`id` <= $end    AND `users`.`delta` = 0 GROUP BY `users`.`id`  ORDER BY NULL
sql_query_range  = SELECT MIN(`id`), MAX(`id`) FROM `users` WHERE `users`.`delta` = 0
sql_query_info   = SELECT * FROM `users` WHERE  `id` = (($id - 3) / 4)
sql_attr_str2ordinal = name_sort
  sql_attr_str2ordinal = state
  sql_attr_uint        = sphinx_internal_id
  sql_attr_uint        = class_crc
  sql_attr_multi       = uint subclass_crcs from field
  sql_attr_uint        = sphinx_deleted

}

source user_0_delta : user_0_core
{
sql_query_pre    = 
sql_query_pre    = SET NAMES utf8

sql_query        = SELECT `users`.`id` * 4 + 3 AS `id` , CAST(`users`.`login` AS CHAR) AS `login`, CAST(CONCAT_WS(' ', `users`.`firstname`, `users`.`lastname`) AS CHAR) AS `name`, IFNULL(CONCAT_WS(' ', `users`.`firstname`, `users`.`lastname`), '') AS `name_sort`, IFNULL(`users`.`state`, '') AS `state`, `users`.`id` AS `sphinx_internal_id`, 765557111 AS `class_crc`, '765557111' AS `subclass_crcs`, 0 AS `sphinx_deleted` FROM users    WHERE `users`.`id` >= $start   AND `users`.`id` <= $end    AND `users`.`delta` = 1 GROUP BY `users`.`id`  ORDER BY NULL
sql_query_range  = SELECT MIN(`id`), MAX(`id`) FROM `users` WHERE `users`.`delta` = 1
}

index user_core
{
source = user_0_core
path = /Users/nguma/Projects/nuniverse/db/sphinx/development/user_core
  charset_type = utf-8
  morphology = stem_en
}
index user_delta : user_core
{
  source = user_0_delta
  path = /Users/nguma/Projects/nuniverse/db/sphinx/development/user_delta
}
index user
{
  type = distributed
  local = user_core
  local = user_delta
}
