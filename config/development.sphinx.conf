indexer
{

}

searchd
{
  address = 127.0.0.1
  port = 3312
  log = /Users/nguma/Projects/nuniverse/log/searchd.log
  query_log = /Users/nguma/Projects/nuniverse/log/searchd.query.log
  pid_file = /Users/nguma/Projects/nuniverse/log/searchd.development.pid

}

source nuniverse_0_core
{
type     = mysql
sql_host = localhost
sql_user = nuniverse
sql_pass = wossname
sql_db   = nuniverse_dev



sql_query_pre    = SET NAMES utf8

sql_query_pre    = UPDATE `nuniverses` SET `delta` = 0
sql_query        = SELECT `nuniverses`.`id` * 5 + 0 AS `id` , CAST(`nuniverses`.`name` AS CHAR) AS `name`, IFNULL(`nuniverses`.`name`, '') AS `name_sort`, `nuniverses`.`active` AS `active`, GROUP_CONCAT(`polycos`.`id` SEPARATOR ',') AS `c_id`, `nuniverses`.`id` AS `sphinx_internal_id`, 4098763623 AS `class_crc`, '4098763623' AS `subclass_crcs`, 0 AS `sphinx_deleted` FROM nuniverses    LEFT OUTER JOIN `polycos` ON `polycos`.object_id = `nuniverses`.id AND `polycos`.object_type = 'Nuniverse' WHERE `nuniverses`.`id` >= $start   AND `nuniverses`.`id` <= $end    AND `nuniverses`.`delta` = 0 GROUP BY `nuniverses`.`id`  ORDER BY NULL
sql_query_range  = SELECT MIN(`id`), MAX(`id`) FROM `nuniverses` WHERE `nuniverses`.`delta` = 0
sql_query_info   = SELECT * FROM `nuniverses` WHERE  `id` = (($id - 0) / 5)
sql_attr_str2ordinal = name_sort
  sql_attr_bool        = active
  sql_attr_multi       = uint c_id from field
  sql_attr_uint        = sphinx_internal_id
  sql_attr_uint        = class_crc
  sql_attr_multi       = uint subclass_crcs from field
  sql_attr_uint        = sphinx_deleted

}

source nuniverse_0_delta : nuniverse_0_core
{
sql_query_pre    = 
sql_query_pre    = SET NAMES utf8

sql_query        = SELECT `nuniverses`.`id` * 5 + 0 AS `id` , CAST(`nuniverses`.`name` AS CHAR) AS `name`, IFNULL(`nuniverses`.`name`, '') AS `name_sort`, `nuniverses`.`active` AS `active`, GROUP_CONCAT(`polycos`.`id` SEPARATOR ',') AS `c_id`, `nuniverses`.`id` AS `sphinx_internal_id`, 4098763623 AS `class_crc`, '4098763623' AS `subclass_crcs`, 0 AS `sphinx_deleted` FROM nuniverses    LEFT OUTER JOIN `polycos` ON `polycos`.object_id = `nuniverses`.id AND `polycos`.object_type = 'Nuniverse' WHERE `nuniverses`.`id` >= $start   AND `nuniverses`.`id` <= $end    AND `nuniverses`.`delta` = 1 GROUP BY `nuniverses`.`id`  ORDER BY NULL
sql_query_range  = SELECT MIN(`id`), MAX(`id`) FROM `nuniverses` WHERE `nuniverses`.`delta` = 1
}

index nuniverse_core
{
source = nuniverse_0_core
path = /Users/nguma/Projects/nuniverse/db/sphinx/development/nuniverse_core
  charset_type = utf-8
  morphology = stem_en
}
index nuniverse_delta : nuniverse_core
{
  source = nuniverse_0_delta
  path = /Users/nguma/Projects/nuniverse/db/sphinx/development/nuniverse_delta
}
index nuniverse
{
  type = distributed
  local = nuniverse_core
  local = nuniverse_delta
}

source polyco_0_core
{
type     = mysql
sql_host = localhost
sql_user = nuniverse
sql_pass = wossname
sql_db   = nuniverse_dev



sql_query_pre    = SET NAMES utf8

sql_query_pre    = UPDATE `polycos` SET `delta` = 0
sql_query        = SELECT `polycos`.`id` * 5 + 1 AS `id` , CAST(GROUP_CONCAT(CONCAT_WS(' ', `nuniverses`.`name`, `bookmarks`.`name`, `stories`.`name`, `videos`.`name`, `taggings`.`predicate`, `taggings_users`.`predicate`, `taggings_bookmarks`.`predicate`, `taggings_videos`.`predicate`, `taggings_polycos`.`predicate`) SEPARATOR ' ') AS CHAR) AS `name`, CAST(`polycos`.`subject_type` AS CHAR) AS `type`, IFNULL(GROUP_CONCAT(CONCAT_WS(' ', `nuniverses`.`name`, `bookmarks`.`name`, `stories`.`name`, `videos`.`name`, `taggings`.`predicate`, `taggings_users`.`predicate`, `taggings_bookmarks`.`predicate`, `taggings_videos`.`predicate`, `taggings_polycos`.`predicate`) SEPARATOR ' '), '') AS `name_sort`, `polycos`.`id` AS `sphinx_internal_id`, 522393089 AS `class_crc`, '522393089' AS `subclass_crcs`, 0 AS `sphinx_deleted` FROM polycos    LEFT OUTER JOIN `taggings` taggings_polycos ON `taggings_polycos`.taggable_id = `polycos`.id AND `taggings_polycos`.taggable_type = 'Polyco'  LEFT OUTER JOIN `nuniverses` ON `nuniverses`.id = `polycos`.subject_id AND `polycos`.`subject_type` = 'Nuniverse'   LEFT OUTER JOIN `users` ON `users`.id = `polycos`.subject_id AND `polycos`.`subject_type` = 'User'   LEFT OUTER JOIN `bookmarks` ON `bookmarks`.id = `polycos`.subject_id AND `polycos`.`subject_type` = 'Bookmark'   LEFT OUTER JOIN `tags` ON `tags`.id = `polycos`.subject_id AND `polycos`.`subject_type` = 'Tag'   LEFT OUTER JOIN `images` ON `images`.id = `polycos`.subject_id AND `polycos`.`subject_type` = 'Image'   LEFT OUTER JOIN `stories` ON `stories`.id = `polycos`.subject_id AND `polycos`.`subject_type` = 'Story'   LEFT OUTER JOIN `videos` ON `videos`.id = `polycos`.subject_id AND `polycos`.`subject_type` = 'Video'   LEFT OUTER JOIN `taggings` ON `taggings`.taggable_id = `nuniverses`.id AND `taggings`.taggable_type = 'Nuniverse'  LEFT OUTER JOIN `taggings` taggings_users ON `taggings_users`.taggable_id = `users`.id AND `taggings_users`.taggable_type = 'User'  LEFT OUTER JOIN `taggings` taggings_bookmarks ON `taggings_bookmarks`.taggable_id = `bookmarks`.id AND `taggings_bookmarks`.taggable_type = 'Bookmark'  LEFT OUTER JOIN `taggings` taggings_videos ON `taggings_videos`.taggable_id = `videos`.id AND `taggings_videos`.taggable_type = 'Video' WHERE `polycos`.`id` >= $start   AND `polycos`.`id` <= $end    AND `polycos`.`delta` = 0 GROUP BY `polycos`.`id`  ORDER BY NULL
sql_query_range  = SELECT MIN(`id`), MAX(`id`) FROM `polycos` WHERE `polycos`.`delta` = 0
sql_query_info   = SELECT * FROM `polycos` WHERE  `id` = (($id - 1) / 5)
sql_attr_str2ordinal = name_sort
  sql_attr_uint        = sphinx_internal_id
  sql_attr_uint        = class_crc
  sql_attr_multi       = uint subclass_crcs from field
  sql_attr_uint        = sphinx_deleted

}

source polyco_0_delta : polyco_0_core
{
sql_query_pre    = 
sql_query_pre    = SET NAMES utf8

sql_query        = SELECT `polycos`.`id` * 5 + 1 AS `id` , CAST(GROUP_CONCAT(CONCAT_WS(' ', `nuniverses`.`name`, `bookmarks`.`name`, `stories`.`name`, `videos`.`name`, `taggings`.`predicate`, `taggings_users`.`predicate`, `taggings_bookmarks`.`predicate`, `taggings_videos`.`predicate`, `taggings_polycos`.`predicate`) SEPARATOR ' ') AS CHAR) AS `name`, CAST(`polycos`.`subject_type` AS CHAR) AS `type`, IFNULL(GROUP_CONCAT(CONCAT_WS(' ', `nuniverses`.`name`, `bookmarks`.`name`, `stories`.`name`, `videos`.`name`, `taggings`.`predicate`, `taggings_users`.`predicate`, `taggings_bookmarks`.`predicate`, `taggings_videos`.`predicate`, `taggings_polycos`.`predicate`) SEPARATOR ' '), '') AS `name_sort`, `polycos`.`id` AS `sphinx_internal_id`, 522393089 AS `class_crc`, '522393089' AS `subclass_crcs`, 0 AS `sphinx_deleted` FROM polycos    LEFT OUTER JOIN `taggings` taggings_polycos ON `taggings_polycos`.taggable_id = `polycos`.id AND `taggings_polycos`.taggable_type = 'Polyco'  LEFT OUTER JOIN `nuniverses` ON `nuniverses`.id = `polycos`.subject_id AND `polycos`.`subject_type` = 'Nuniverse'   LEFT OUTER JOIN `users` ON `users`.id = `polycos`.subject_id AND `polycos`.`subject_type` = 'User'   LEFT OUTER JOIN `bookmarks` ON `bookmarks`.id = `polycos`.subject_id AND `polycos`.`subject_type` = 'Bookmark'   LEFT OUTER JOIN `tags` ON `tags`.id = `polycos`.subject_id AND `polycos`.`subject_type` = 'Tag'   LEFT OUTER JOIN `images` ON `images`.id = `polycos`.subject_id AND `polycos`.`subject_type` = 'Image'   LEFT OUTER JOIN `stories` ON `stories`.id = `polycos`.subject_id AND `polycos`.`subject_type` = 'Story'   LEFT OUTER JOIN `videos` ON `videos`.id = `polycos`.subject_id AND `polycos`.`subject_type` = 'Video'   LEFT OUTER JOIN `taggings` ON `taggings`.taggable_id = `nuniverses`.id AND `taggings`.taggable_type = 'Nuniverse'  LEFT OUTER JOIN `taggings` taggings_users ON `taggings_users`.taggable_id = `users`.id AND `taggings_users`.taggable_type = 'User'  LEFT OUTER JOIN `taggings` taggings_bookmarks ON `taggings_bookmarks`.taggable_id = `bookmarks`.id AND `taggings_bookmarks`.taggable_type = 'Bookmark'  LEFT OUTER JOIN `taggings` taggings_videos ON `taggings_videos`.taggable_id = `videos`.id AND `taggings_videos`.taggable_type = 'Video' WHERE `polycos`.`id` >= $start   AND `polycos`.`id` <= $end    AND `polycos`.`delta` = 1 GROUP BY `polycos`.`id`  ORDER BY NULL
sql_query_range  = SELECT MIN(`id`), MAX(`id`) FROM `polycos` WHERE `polycos`.`delta` = 1
}

index polyco_core
{
source = polyco_0_core
path = /Users/nguma/Projects/nuniverse/db/sphinx/development/polyco_core
  charset_type = utf-8
  morphology = stem_en
}
index polyco_delta : polyco_core
{
  source = polyco_0_delta
  path = /Users/nguma/Projects/nuniverse/db/sphinx/development/polyco_delta
}
index polyco
{
  type = distributed
  local = polyco_core
  local = polyco_delta
}

source story_0_core
{
type     = mysql
sql_host = localhost
sql_user = nuniverse
sql_pass = wossname
sql_db   = nuniverse_dev



sql_query_pre    = SET NAMES utf8

sql_query_pre    = 
sql_query        = SELECT `stories`.`id` * 5 + 2 AS `id` , CAST(`stories`.`name` AS CHAR) AS `name`, IFNULL(`stories`.`name`, '') AS `name_sort`, UNIX_TIMESTAMP(`stories`.`created_at`) AS `created_at`, UNIX_TIMESTAMP(`stories`.`updated_at`) AS `updated_at`, `stories`.`id` AS `sphinx_internal_id`, 714550076 AS `class_crc`, '714550076' AS `subclass_crcs`, 0 AS `sphinx_deleted` FROM stories    WHERE `stories`.`id` >= $start   AND `stories`.`id` <= $end    GROUP BY `stories`.`id`  ORDER BY NULL
sql_query_range  = SELECT MIN(`id`), MAX(`id`) FROM `stories` 
sql_query_info   = SELECT * FROM `stories` WHERE  `id` = (($id - 2) / 5)
sql_attr_str2ordinal = name_sort
  sql_attr_timestamp   = created_at
  sql_attr_timestamp   = updated_at
  sql_attr_uint        = sphinx_internal_id
  sql_attr_uint        = class_crc
  sql_attr_multi       = uint subclass_crcs from field
  sql_attr_uint        = sphinx_deleted

}

index story_core
{
source = story_0_core
path = /Users/nguma/Projects/nuniverse/db/sphinx/development/story_core
  charset_type = utf-8
  morphology = stem_en
}
index story
{
  type = distributed
  local = story_core
}

source tagging_0_core
{
type     = mysql
sql_host = localhost
sql_user = nuniverse
sql_pass = wossname
sql_db   = nuniverse_dev



sql_query_pre    = SET NAMES utf8

sql_query_pre    = UPDATE `taggings` SET `delta` = 0
sql_query        = SELECT `taggings`.`id` * 5 + 3 AS `id` , CAST(`taggings`.`predicate` AS CHAR) AS `predicate`, `taggings`.`id` AS `sphinx_internal_id`, 1796466879 AS `class_crc`, '1796466879' AS `subclass_crcs`, 0 AS `sphinx_deleted` FROM taggings    WHERE `taggings`.`id` >= $start   AND `taggings`.`id` <= $end    AND `taggings`.`delta` = 0 GROUP BY `taggings`.`id`  ORDER BY NULL
sql_query_range  = SELECT MIN(`id`), MAX(`id`) FROM `taggings` WHERE `taggings`.`delta` = 0
sql_query_info   = SELECT * FROM `taggings` WHERE  `id` = (($id - 3) / 5)
sql_attr_uint        = sphinx_internal_id
  sql_attr_uint        = class_crc
  sql_attr_multi       = uint subclass_crcs from field
  sql_attr_uint        = sphinx_deleted

}

source tagging_0_delta : tagging_0_core
{
sql_query_pre    = 
sql_query_pre    = SET NAMES utf8

sql_query        = SELECT `taggings`.`id` * 5 + 3 AS `id` , CAST(`taggings`.`predicate` AS CHAR) AS `predicate`, `taggings`.`id` AS `sphinx_internal_id`, 1796466879 AS `class_crc`, '1796466879' AS `subclass_crcs`, 0 AS `sphinx_deleted` FROM taggings    WHERE `taggings`.`id` >= $start   AND `taggings`.`id` <= $end    AND `taggings`.`delta` = 1 GROUP BY `taggings`.`id`  ORDER BY NULL
sql_query_range  = SELECT MIN(`id`), MAX(`id`) FROM `taggings` WHERE `taggings`.`delta` = 1
}

index tagging_core
{
source = tagging_0_core
path = /Users/nguma/Projects/nuniverse/db/sphinx/development/tagging_core
  charset_type = utf-8
  morphology = stem_en
}
index tagging_delta : tagging_core
{
  source = tagging_0_delta
  path = /Users/nguma/Projects/nuniverse/db/sphinx/development/tagging_delta
}
index tagging
{
  type = distributed
  local = tagging_core
  local = tagging_delta
}

source user_0_core
{
type     = mysql
sql_host = localhost
sql_user = nuniverse
sql_pass = wossname
sql_db   = nuniverse_dev



sql_query_pre    = SET NAMES utf8

sql_query_pre    = UPDATE `users` SET `delta` = 0
sql_query        = SELECT `users`.`id` * 5 + 4 AS `id` , CAST(`users`.`login` AS CHAR) AS `login`, CAST(CONCAT_WS(' ', `users`.`firstname`, `users`.`lastname`) AS CHAR) AS `name`, CAST(GROUP_CONCAT(`taggings`.`predicate` SEPARATOR ' ') AS CHAR) AS `predicate`, IFNULL(CONCAT_WS(' ', `users`.`firstname`, `users`.`lastname`), '') AS `name_sort`, GROUP_CONCAT(`polycos`.`id` SEPARATOR ',') AS `c_id`, IFNULL(`users`.`state`, '') AS `state`, `users`.`id` AS `sphinx_internal_id`, 765557111 AS `class_crc`, '765557111' AS `subclass_crcs`, 0 AS `sphinx_deleted` FROM users    LEFT OUTER JOIN `taggings` ON `taggings`.taggable_id = `users`.id AND `taggings`.taggable_type = 'User'  LEFT OUTER JOIN `polycos` ON `polycos`.object_id = `users`.id AND `polycos`.object_type = 'User' WHERE `users`.`id` >= $start   AND `users`.`id` <= $end    AND `users`.`delta` = 0 GROUP BY `users`.`id`  ORDER BY NULL
sql_query_range  = SELECT MIN(`id`), MAX(`id`) FROM `users` WHERE `users`.`delta` = 0
sql_query_info   = SELECT * FROM `users` WHERE  `id` = (($id - 4) / 5)
sql_attr_str2ordinal = name_sort
  sql_attr_multi       = uint c_id from field
  sql_attr_str2ordinal = state
  sql_attr_uint        = sphinx_internal_id
  sql_attr_uint        = class_crc
  sql_attr_multi       = uint subclass_crcs from field
  sql_attr_uint        = sphinx_deleted

}

source user_0_delta : user_0_core
{
sql_query_pre    = 
sql_query_pre    = SET NAMES utf8

sql_query        = SELECT `users`.`id` * 5 + 4 AS `id` , CAST(`users`.`login` AS CHAR) AS `login`, CAST(CONCAT_WS(' ', `users`.`firstname`, `users`.`lastname`) AS CHAR) AS `name`, CAST(GROUP_CONCAT(`taggings`.`predicate` SEPARATOR ' ') AS CHAR) AS `predicate`, IFNULL(CONCAT_WS(' ', `users`.`firstname`, `users`.`lastname`), '') AS `name_sort`, GROUP_CONCAT(`polycos`.`id` SEPARATOR ',') AS `c_id`, IFNULL(`users`.`state`, '') AS `state`, `users`.`id` AS `sphinx_internal_id`, 765557111 AS `class_crc`, '765557111' AS `subclass_crcs`, 0 AS `sphinx_deleted` FROM users    LEFT OUTER JOIN `taggings` ON `taggings`.taggable_id = `users`.id AND `taggings`.taggable_type = 'User'  LEFT OUTER JOIN `polycos` ON `polycos`.object_id = `users`.id AND `polycos`.object_type = 'User' WHERE `users`.`id` >= $start   AND `users`.`id` <= $end    AND `users`.`delta` = 1 GROUP BY `users`.`id`  ORDER BY NULL
sql_query_range  = SELECT MIN(`id`), MAX(`id`) FROM `users` WHERE `users`.`delta` = 1
}

index user_core
{
source = user_0_core
path = /Users/nguma/Projects/nuniverse/db/sphinx/development/user_core
  charset_type = utf-8
  morphology = stem_en
}
index user_delta : user_core
{
  source = user_0_delta
  path = /Users/nguma/Projects/nuniverse/db/sphinx/development/user_delta
}
index user
{
  type = distributed
  local = user_core
  local = user_delta
}
