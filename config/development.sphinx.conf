indexer
{

}

searchd
{
  address = 127.0.0.1
  port = 3312
  log = /Users/nguma/Projects/nuniverse/log/searchd.log
  query_log = /Users/nguma/Projects/nuniverse/log/searchd.query.log
  pid_file = /Users/nguma/Projects/nuniverse/log/searchd.development.pid

}

source fact_0_core
{
type     = mysql
sql_host = localhost
sql_user = nuniverse
sql_pass = wossname
sql_db   = nuniverse_dev



sql_query_pre    = SET NAMES utf8

sql_query_pre    = UPDATE `facts` SET `delta` = 0
sql_query        = SELECT `facts`.`id` * 7 + 0 AS `id` , CAST(GROUP_CONCAT(CONCAT_WS(' ', `facts`.`body`, `nuniverses`.`name`) SEPARATOR ' ') AS CHAR) AS `body`, CAST(`users`.`login` AS CHAR) AS `author`, CAST(GROUP_CONCAT(`nuniverses`.`name` SEPARATOR ' ') AS CHAR) AS `tags`, CAST(CONCAT_WS(' ', `parent_Nuniverses_facts`.`unique_name`) AS CHAR) AS `parent`, CAST(`facts`.`parent_type` AS CHAR) AS `parent_type`, `facts`.`parent_id` AS `parent_id`, UNIX_TIMESTAMP(`facts`.`created_at`) AS `created_at`, GROUP_CONCAT(`objects_facts`.`id` SEPARATOR ',') AS `nuniverse_ids`, `facts`.`id` AS `sphinx_internal_id`, 3482776747 AS `class_crc`, '3482776747' AS `subclass_crcs`, 0 AS `sphinx_deleted` FROM facts    LEFT OUTER JOIN `taggings` ON (`facts`.`id` = `taggings`.`taggable_id` AND `taggings`.`taggable_type` = 'Fact' AND `taggings`.`tag_type` = 'Nuniverse')  LEFT OUTER JOIN `nuniverses` ON (`nuniverses`.`id` = `taggings`.`tag_id`)   LEFT OUTER JOIN `users` ON `users`.id = `facts`.author_id   LEFT OUTER JOIN `users` parent_Users_facts ON `parent_Users_facts`.id = `facts`.parent_id AND `facts`.`parent_type` = 'User'   LEFT OUTER JOIN `nuniverses` parent_Nuniverses_facts ON `parent_Nuniverses_facts`.id = `facts`.parent_id AND `facts`.`parent_type` = 'Nuniverse'   LEFT OUTER JOIN `facts` parent_Facts_facts ON `parent_Facts_facts`.id = `facts`.parent_id AND `facts`.`parent_type` = 'Fact'   LEFT OUTER JOIN `polycos` ON (`facts`.`id` = `polycos`.`subject_id` AND `polycos`.`subject_type` = 'Fact' AND `polycos`.`object_type` = 'Nuniverse')  LEFT OUTER JOIN `nuniverses` objects_facts ON (`objects_facts`.`id` = `polycos`.`object_id`)  WHERE `facts`.`id` >= $start   AND `facts`.`id` <= $end    AND `facts`.`delta` = 0 GROUP BY `facts`.`id`  ORDER BY NULL
sql_query_range  = SELECT MIN(`id`), MAX(`id`) FROM `facts` WHERE `facts`.`delta` = 0
sql_query_info   = SELECT * FROM `facts` WHERE  `id` = (($id - 0) / 7)
sql_attr_uint        = parent_id
  sql_attr_timestamp   = created_at
  sql_attr_multi       = uint nuniverse_ids from field
  sql_attr_uint        = sphinx_internal_id
  sql_attr_uint        = class_crc
  sql_attr_multi       = uint subclass_crcs from field
  sql_attr_uint        = sphinx_deleted

}

source fact_0_delta : fact_0_core
{
sql_query_pre    = 
sql_query_pre    = SET NAMES utf8

sql_query        = SELECT `facts`.`id` * 7 + 0 AS `id` , CAST(GROUP_CONCAT(CONCAT_WS(' ', `facts`.`body`, `nuniverses`.`name`) SEPARATOR ' ') AS CHAR) AS `body`, CAST(`users`.`login` AS CHAR) AS `author`, CAST(GROUP_CONCAT(`nuniverses`.`name` SEPARATOR ' ') AS CHAR) AS `tags`, CAST(CONCAT_WS(' ', `parent_Nuniverses_facts`.`unique_name`) AS CHAR) AS `parent`, CAST(`facts`.`parent_type` AS CHAR) AS `parent_type`, `facts`.`parent_id` AS `parent_id`, UNIX_TIMESTAMP(`facts`.`created_at`) AS `created_at`, GROUP_CONCAT(`objects_facts`.`id` SEPARATOR ',') AS `nuniverse_ids`, `facts`.`id` AS `sphinx_internal_id`, 3482776747 AS `class_crc`, '3482776747' AS `subclass_crcs`, 0 AS `sphinx_deleted` FROM facts    LEFT OUTER JOIN `taggings` ON (`facts`.`id` = `taggings`.`taggable_id` AND `taggings`.`taggable_type` = 'Fact' AND `taggings`.`tag_type` = 'Nuniverse')  LEFT OUTER JOIN `nuniverses` ON (`nuniverses`.`id` = `taggings`.`tag_id`)   LEFT OUTER JOIN `users` ON `users`.id = `facts`.author_id   LEFT OUTER JOIN `users` parent_Users_facts ON `parent_Users_facts`.id = `facts`.parent_id AND `facts`.`parent_type` = 'User'   LEFT OUTER JOIN `nuniverses` parent_Nuniverses_facts ON `parent_Nuniverses_facts`.id = `facts`.parent_id AND `facts`.`parent_type` = 'Nuniverse'   LEFT OUTER JOIN `facts` parent_Facts_facts ON `parent_Facts_facts`.id = `facts`.parent_id AND `facts`.`parent_type` = 'Fact'   LEFT OUTER JOIN `polycos` ON (`facts`.`id` = `polycos`.`subject_id` AND `polycos`.`subject_type` = 'Fact' AND `polycos`.`object_type` = 'Nuniverse')  LEFT OUTER JOIN `nuniverses` objects_facts ON (`objects_facts`.`id` = `polycos`.`object_id`)  WHERE `facts`.`id` >= $start   AND `facts`.`id` <= $end    AND `facts`.`delta` = 1 GROUP BY `facts`.`id`  ORDER BY NULL
sql_query_range  = SELECT MIN(`id`), MAX(`id`) FROM `facts` WHERE `facts`.`delta` = 1
}

index fact_core
{
source = fact_0_core
path = /Users/nguma/Projects/nuniverse/db/sphinx/development/fact_core
  charset_type = utf-8
  morphology = stem_en
}
index fact_delta : fact_core
{
  source = fact_0_delta
  path = /Users/nguma/Projects/nuniverse/db/sphinx/development/fact_delta
}
index fact
{
  type = distributed
  local = fact_core
  local = fact_delta
}

source nuniverse_0_core
{
type     = mysql
sql_host = localhost
sql_user = nuniverse
sql_pass = wossname
sql_db   = nuniverse_dev



sql_query_pre    = SET NAMES utf8

sql_query_pre    = UPDATE `nuniverses` SET `delta` = 0
sql_query        = SELECT `nuniverses`.`id` * 7 + 1 AS `id` , CAST(`nuniverses`.`name` AS CHAR) AS `name`, CAST(`nuniverses`.`unique_name` AS CHAR) AS `identifier`, CAST(GROUP_CONCAT(CONCAT_WS(' ', `tags`.`name`, `tag_Nuniverses_taggings`.`name`, `stories`.`name`) SEPARATOR ' ') AS CHAR) AS `tags`, CAST(GROUP_CONCAT(CONCAT_WS(' ', `nuniverses`.`name`, `tags`.`name`, `tag_Nuniverses_taggings`.`name`, `stories`.`name`) SEPARATOR ' ') AS CHAR) AS `contexts`, IFNULL(`nuniverses`.`name`, '') AS `name_sort`, IFNULL(`nuniverses`.`unique_name`, '') AS `identifier_sort`, `nuniverses`.`active` AS `active`, GROUP_CONCAT(`tags_nuniverses`.`id` SEPARATOR ',') AS `tag_ids`, GROUP_CONCAT(`collections`.`id` SEPARATOR ',') AS `context_ids`, CHAR_LENGTH(nuniverses.name) AS `length`, `nuniverses`.`id` AS `sphinx_internal_id`, 4098763623 AS `class_crc`, '4098763623' AS `subclass_crcs`, 0 AS `sphinx_deleted` FROM nuniverses    LEFT OUTER JOIN `taggings` ON `taggings`.taggable_id = `nuniverses`.id AND `taggings`.taggable_type = 'Nuniverse'  LEFT OUTER JOIN `tags` ON `tags`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'Tag'   LEFT OUTER JOIN `nuniverses` tag_Nuniverses_taggings ON `tag_Nuniverses_taggings`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'Nuniverse'   LEFT OUTER JOIN `stories` ON `stories`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'Story'   LEFT OUTER JOIN `users` ON `users`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'User'   LEFT OUTER JOIN `facts` ON `facts`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'Fact'   LEFT OUTER JOIN `taggings` tags_nuniverses_join ON (`nuniverses`.`id` = `tags_nuniverses_join`.`taggable_id` AND `tags_nuniverses_join`.`taggable_type` = 'Nuniverse' AND `tags_nuniverses_join`.`tag_type` = 'Tag')  LEFT OUTER JOIN `tags` tags_nuniverses ON (`tags_nuniverses`.`id` = `tags_nuniverses_join`.`tag_id`)   LEFT OUTER JOIN `taggings` contexts_nuniverses_join ON (`nuniverses`.`id` = `contexts_nuniverses_join`.`taggable_id` AND `contexts_nuniverses_join`.`taggable_type` = 'Nuniverse' AND `contexts_nuniverses_join`.`tag_type` = 'Collection')  LEFT OUTER JOIN `collections` ON (`collections`.`id` = `contexts_nuniverses_join`.`tag_id`)  WHERE `nuniverses`.`id` >= $start   AND `nuniverses`.`id` <= $end    AND `nuniverses`.`delta` = 0 GROUP BY `nuniverses`.`id`  ORDER BY NULL
sql_query_range  = SELECT MIN(`id`), MAX(`id`) FROM `nuniverses` WHERE `nuniverses`.`delta` = 0
sql_query_info   = SELECT * FROM `nuniverses` WHERE  `id` = (($id - 1) / 7)
sql_attr_str2ordinal = name_sort
  sql_attr_str2ordinal = identifier_sort
  sql_attr_bool        = active
  sql_attr_multi       = uint tag_ids from field
  sql_attr_multi       = uint context_ids from field
  sql_attr_uint        = length
  sql_attr_uint        = sphinx_internal_id
  sql_attr_uint        = class_crc
  sql_attr_multi       = uint subclass_crcs from field
  sql_attr_uint        = sphinx_deleted

}

source nuniverse_0_delta : nuniverse_0_core
{
sql_query_pre    = 
sql_query_pre    = SET NAMES utf8

sql_query        = SELECT `nuniverses`.`id` * 7 + 1 AS `id` , CAST(`nuniverses`.`name` AS CHAR) AS `name`, CAST(`nuniverses`.`unique_name` AS CHAR) AS `identifier`, CAST(GROUP_CONCAT(CONCAT_WS(' ', `tags`.`name`, `tag_Nuniverses_taggings`.`name`, `stories`.`name`) SEPARATOR ' ') AS CHAR) AS `tags`, CAST(GROUP_CONCAT(CONCAT_WS(' ', `nuniverses`.`name`, `tags`.`name`, `tag_Nuniverses_taggings`.`name`, `stories`.`name`) SEPARATOR ' ') AS CHAR) AS `contexts`, IFNULL(`nuniverses`.`name`, '') AS `name_sort`, IFNULL(`nuniverses`.`unique_name`, '') AS `identifier_sort`, `nuniverses`.`active` AS `active`, GROUP_CONCAT(`tags_nuniverses`.`id` SEPARATOR ',') AS `tag_ids`, GROUP_CONCAT(`collections`.`id` SEPARATOR ',') AS `context_ids`, CHAR_LENGTH(nuniverses.name) AS `length`, `nuniverses`.`id` AS `sphinx_internal_id`, 4098763623 AS `class_crc`, '4098763623' AS `subclass_crcs`, 0 AS `sphinx_deleted` FROM nuniverses    LEFT OUTER JOIN `taggings` ON `taggings`.taggable_id = `nuniverses`.id AND `taggings`.taggable_type = 'Nuniverse'  LEFT OUTER JOIN `tags` ON `tags`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'Tag'   LEFT OUTER JOIN `nuniverses` tag_Nuniverses_taggings ON `tag_Nuniverses_taggings`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'Nuniverse'   LEFT OUTER JOIN `stories` ON `stories`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'Story'   LEFT OUTER JOIN `users` ON `users`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'User'   LEFT OUTER JOIN `facts` ON `facts`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'Fact'   LEFT OUTER JOIN `taggings` tags_nuniverses_join ON (`nuniverses`.`id` = `tags_nuniverses_join`.`taggable_id` AND `tags_nuniverses_join`.`taggable_type` = 'Nuniverse' AND `tags_nuniverses_join`.`tag_type` = 'Tag')  LEFT OUTER JOIN `tags` tags_nuniverses ON (`tags_nuniverses`.`id` = `tags_nuniverses_join`.`tag_id`)   LEFT OUTER JOIN `taggings` contexts_nuniverses_join ON (`nuniverses`.`id` = `contexts_nuniverses_join`.`taggable_id` AND `contexts_nuniverses_join`.`taggable_type` = 'Nuniverse' AND `contexts_nuniverses_join`.`tag_type` = 'Collection')  LEFT OUTER JOIN `collections` ON (`collections`.`id` = `contexts_nuniverses_join`.`tag_id`)  WHERE `nuniverses`.`id` >= $start   AND `nuniverses`.`id` <= $end    AND `nuniverses`.`delta` = 1 GROUP BY `nuniverses`.`id`  ORDER BY NULL
sql_query_range  = SELECT MIN(`id`), MAX(`id`) FROM `nuniverses` WHERE `nuniverses`.`delta` = 1
}

index nuniverse_core
{
source = nuniverse_0_core
path = /Users/nguma/Projects/nuniverse/db/sphinx/development/nuniverse_core
  enable_star = 1
  min_prefix_len = 1
  charset_type = utf-8
  morphology = stem_en
}
index nuniverse_delta : nuniverse_core
{
  source = nuniverse_0_delta
  path = /Users/nguma/Projects/nuniverse/db/sphinx/development/nuniverse_delta
}
index nuniverse
{
  type = distributed
  local = nuniverse_core
  local = nuniverse_delta
}

source polyco_0_core
{
type     = mysql
sql_host = localhost
sql_user = nuniverse
sql_pass = wossname
sql_db   = nuniverse_dev



sql_query_pre    = SET NAMES utf8

sql_query_pre    = UPDATE `polycos` SET `delta` = 0
sql_query        = SELECT `polycos`.`id` * 7 + 2 AS `id` , CAST(CONCAT_WS(' ', `nuniverses`.`unique_name`, `users`.`login`, `facts`.`body`, `comments`.`body`, `object_Nuniverses_polycos`.`unique_name`, `stories`.`unique_name`, `object_Users_polycos`.`login`) AS CHAR) AS `content`, CAST(GROUP_CONCAT(CONCAT_WS(' ', `tags`.`name`, `tag_Nuniverses_taggings`.`name`, `tag_Stories_taggings`.`name`, `polycos`.`subject_type`) SEPARATOR ' ') AS CHAR) AS `tags`, CAST(`polycos`.`subject_type` AS CHAR) AS `type`, IFNULL(CONCAT_WS(' ', `nuniverses`.`unique_name`, `users`.`login`, `facts`.`body`, `comments`.`body`, `object_Nuniverses_polycos`.`unique_name`, `stories`.`unique_name`, `object_Users_polycos`.`login`), '') AS `content_sort`, `polycos`.`object_id` AS `object_id`, `polycos`.`subject_id` AS `subject_id`, `polycos`.`id` AS `sphinx_internal_id`, 522393089 AS `class_crc`, '522393089' AS `subclass_crcs`, 0 AS `sphinx_deleted` FROM polycos    LEFT OUTER JOIN `nuniverses` object_Nuniverses_polycos ON `object_Nuniverses_polycos`.id = `polycos`.object_id AND `polycos`.`object_type` = 'Nuniverse'   LEFT OUTER JOIN `users` object_Users_polycos ON `object_Users_polycos`.id = `polycos`.object_id AND `polycos`.`object_type` = 'User'   LEFT OUTER JOIN `facts` object_Facts_polycos ON `object_Facts_polycos`.id = `polycos`.object_id AND `polycos`.`object_type` = 'Fact'   LEFT OUTER JOIN `stories` ON `stories`.id = `polycos`.object_id AND `polycos`.`object_type` = 'Story'   LEFT OUTER JOIN `comments` object_Comments_polycos ON `object_Comments_polycos`.id = `polycos`.object_id AND `polycos`.`object_type` = 'Comment'   LEFT OUTER JOIN `bookmarks` object_Bookmarks_polycos ON `object_Bookmarks_polycos`.id = `polycos`.object_id AND `polycos`.`object_type` = 'Bookmark'   LEFT OUTER JOIN `facts` ON `facts`.id = `polycos`.subject_id AND `polycos`.`subject_type` = 'Fact'   LEFT OUTER JOIN `users` ON `users`.id = `polycos`.subject_id AND `polycos`.`subject_type` = 'User'   LEFT OUTER JOIN `nuniverses` ON `nuniverses`.id = `polycos`.subject_id AND `polycos`.`subject_type` = 'Nuniverse'   LEFT OUTER JOIN `images` ON `images`.id = `polycos`.subject_id AND `polycos`.`subject_type` = 'Image'   LEFT OUTER JOIN `comments` ON `comments`.id = `polycos`.subject_id AND `polycos`.`subject_type` = 'Comment'   LEFT OUTER JOIN `bookmarks` ON `bookmarks`.id = `polycos`.subject_id AND `polycos`.`subject_type` = 'Bookmark'   LEFT OUTER JOIN `taggings` ON `taggings`.taggable_id = `polycos`.id AND `taggings`.taggable_type = 'Polyco'  LEFT OUTER JOIN `tags` ON `tags`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'Tag'   LEFT OUTER JOIN `nuniverses` tag_Nuniverses_taggings ON `tag_Nuniverses_taggings`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'Nuniverse'   LEFT OUTER JOIN `stories` tag_Stories_taggings ON `tag_Stories_taggings`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'Story'   LEFT OUTER JOIN `users` tag_Users_taggings ON `tag_Users_taggings`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'User'   LEFT OUTER JOIN `facts` tag_Facts_taggings ON `tag_Facts_taggings`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'Fact'  WHERE `polycos`.`id` >= $start   AND `polycos`.`id` <= $end    AND `polycos`.`delta` = 0 GROUP BY `polycos`.`id`  ORDER BY NULL
sql_query_range  = SELECT MIN(`id`), MAX(`id`) FROM `polycos` WHERE `polycos`.`delta` = 0
sql_query_info   = SELECT * FROM `polycos` WHERE  `id` = (($id - 2) / 7)
sql_attr_str2ordinal = content_sort
  sql_attr_uint        = object_id
  sql_attr_uint        = subject_id
  sql_attr_uint        = sphinx_internal_id
  sql_attr_uint        = class_crc
  sql_attr_multi       = uint subclass_crcs from field
  sql_attr_uint        = sphinx_deleted

}

source polyco_0_delta : polyco_0_core
{
sql_query_pre    = 
sql_query_pre    = SET NAMES utf8

sql_query        = SELECT `polycos`.`id` * 7 + 2 AS `id` , CAST(CONCAT_WS(' ', `nuniverses`.`unique_name`, `users`.`login`, `facts`.`body`, `comments`.`body`, `object_Nuniverses_polycos`.`unique_name`, `stories`.`unique_name`, `object_Users_polycos`.`login`) AS CHAR) AS `content`, CAST(GROUP_CONCAT(CONCAT_WS(' ', `tags`.`name`, `tag_Nuniverses_taggings`.`name`, `tag_Stories_taggings`.`name`, `polycos`.`subject_type`) SEPARATOR ' ') AS CHAR) AS `tags`, CAST(`polycos`.`subject_type` AS CHAR) AS `type`, IFNULL(CONCAT_WS(' ', `nuniverses`.`unique_name`, `users`.`login`, `facts`.`body`, `comments`.`body`, `object_Nuniverses_polycos`.`unique_name`, `stories`.`unique_name`, `object_Users_polycos`.`login`), '') AS `content_sort`, `polycos`.`object_id` AS `object_id`, `polycos`.`subject_id` AS `subject_id`, `polycos`.`id` AS `sphinx_internal_id`, 522393089 AS `class_crc`, '522393089' AS `subclass_crcs`, 0 AS `sphinx_deleted` FROM polycos    LEFT OUTER JOIN `nuniverses` object_Nuniverses_polycos ON `object_Nuniverses_polycos`.id = `polycos`.object_id AND `polycos`.`object_type` = 'Nuniverse'   LEFT OUTER JOIN `users` object_Users_polycos ON `object_Users_polycos`.id = `polycos`.object_id AND `polycos`.`object_type` = 'User'   LEFT OUTER JOIN `facts` object_Facts_polycos ON `object_Facts_polycos`.id = `polycos`.object_id AND `polycos`.`object_type` = 'Fact'   LEFT OUTER JOIN `stories` ON `stories`.id = `polycos`.object_id AND `polycos`.`object_type` = 'Story'   LEFT OUTER JOIN `comments` object_Comments_polycos ON `object_Comments_polycos`.id = `polycos`.object_id AND `polycos`.`object_type` = 'Comment'   LEFT OUTER JOIN `bookmarks` object_Bookmarks_polycos ON `object_Bookmarks_polycos`.id = `polycos`.object_id AND `polycos`.`object_type` = 'Bookmark'   LEFT OUTER JOIN `facts` ON `facts`.id = `polycos`.subject_id AND `polycos`.`subject_type` = 'Fact'   LEFT OUTER JOIN `users` ON `users`.id = `polycos`.subject_id AND `polycos`.`subject_type` = 'User'   LEFT OUTER JOIN `nuniverses` ON `nuniverses`.id = `polycos`.subject_id AND `polycos`.`subject_type` = 'Nuniverse'   LEFT OUTER JOIN `images` ON `images`.id = `polycos`.subject_id AND `polycos`.`subject_type` = 'Image'   LEFT OUTER JOIN `comments` ON `comments`.id = `polycos`.subject_id AND `polycos`.`subject_type` = 'Comment'   LEFT OUTER JOIN `bookmarks` ON `bookmarks`.id = `polycos`.subject_id AND `polycos`.`subject_type` = 'Bookmark'   LEFT OUTER JOIN `taggings` ON `taggings`.taggable_id = `polycos`.id AND `taggings`.taggable_type = 'Polyco'  LEFT OUTER JOIN `tags` ON `tags`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'Tag'   LEFT OUTER JOIN `nuniverses` tag_Nuniverses_taggings ON `tag_Nuniverses_taggings`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'Nuniverse'   LEFT OUTER JOIN `stories` tag_Stories_taggings ON `tag_Stories_taggings`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'Story'   LEFT OUTER JOIN `users` tag_Users_taggings ON `tag_Users_taggings`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'User'   LEFT OUTER JOIN `facts` tag_Facts_taggings ON `tag_Facts_taggings`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'Fact'  WHERE `polycos`.`id` >= $start   AND `polycos`.`id` <= $end    AND `polycos`.`delta` = 1 GROUP BY `polycos`.`id`  ORDER BY NULL
sql_query_range  = SELECT MIN(`id`), MAX(`id`) FROM `polycos` WHERE `polycos`.`delta` = 1
}

index polyco_core
{
source = polyco_0_core
path = /Users/nguma/Projects/nuniverse/db/sphinx/development/polyco_core
  charset_type = utf-8
  morphology = stem_en
}
index polyco_delta : polyco_core
{
  source = polyco_0_delta
  path = /Users/nguma/Projects/nuniverse/db/sphinx/development/polyco_delta
}
index polyco
{
  type = distributed
  local = polyco_core
  local = polyco_delta
}

source story_0_core
{
type     = mysql
sql_host = localhost
sql_user = nuniverse
sql_pass = wossname
sql_db   = nuniverse_dev



sql_query_pre    = SET NAMES utf8

sql_query_pre    = 
sql_query        = SELECT `stories`.`id` * 7 + 3 AS `id` , CAST(`stories`.`name` AS CHAR) AS `name`, IFNULL(`stories`.`name`, '') AS `name_sort`, UNIX_TIMESTAMP(`stories`.`created_at`) AS `created_at`, UNIX_TIMESTAMP(`stories`.`updated_at`) AS `updated_at`, `stories`.`id` AS `user_ids`, `stories`.`id` AS `sphinx_internal_id`, 714550076 AS `class_crc`, '714550076' AS `subclass_crcs`, 0 AS `sphinx_deleted` FROM stories    WHERE `stories`.`id` >= $start   AND `stories`.`id` <= $end    GROUP BY `stories`.`id`  ORDER BY NULL
sql_query_range  = SELECT MIN(`id`), MAX(`id`) FROM `stories` 
sql_query_info   = SELECT * FROM `stories` WHERE  `id` = (($id - 3) / 7)
sql_attr_str2ordinal = name_sort
  sql_attr_timestamp   = created_at
  sql_attr_timestamp   = updated_at
  sql_attr_uint        = user_ids
  sql_attr_uint        = sphinx_internal_id
  sql_attr_uint        = class_crc
  sql_attr_multi       = uint subclass_crcs from field
  sql_attr_uint        = sphinx_deleted

}

index story_core
{
source = story_0_core
path = /Users/nguma/Projects/nuniverse/db/sphinx/development/story_core
  charset_type = utf-8
  morphology = stem_en
}
index story
{
  type = distributed
  local = story_core
}

source tag_0_core
{
type     = mysql
sql_host = localhost
sql_user = nuniverse
sql_pass = wossname
sql_db   = nuniverse_dev



sql_query_pre    = SET NAMES utf8

sql_query_pre    = UPDATE `tags` SET `delta` = 0
sql_query        = SELECT `tags`.`id` * 7 + 4 AS `id` , CAST(`tags`.`name` AS CHAR) AS `name`, CAST(GROUP_CONCAT(`polycos`.`object_type` SEPARATOR ' ') AS CHAR) AS `object_type`, GROUP_CONCAT(`polycos`.`object_id` SEPARATOR ',') AS `object_id`, `tags`.`id` AS `sphinx_internal_id`, 1002762595 AS `class_crc`, '1002762595' AS `subclass_crcs`, 0 AS `sphinx_deleted` FROM tags    LEFT OUTER JOIN `taggings` ON (`tags`.`id` = `taggings`.`tag_id` AND `taggings`.`tag_type` = 'Tag' AND `taggings`.`taggable_type` = 'Polyco')  LEFT OUTER JOIN `polycos` ON (`polycos`.`id` = `taggings`.`taggable_id`)  WHERE `tags`.`id` >= $start   AND `tags`.`id` <= $end    AND `tags`.`delta` = 0 GROUP BY `tags`.`id`  ORDER BY NULL
sql_query_range  = SELECT MIN(`id`), MAX(`id`) FROM `tags` WHERE `tags`.`delta` = 0
sql_query_info   = SELECT * FROM `tags` WHERE  `id` = (($id - 4) / 7)
sql_attr_multi       = uint object_id from field
  sql_attr_uint        = sphinx_internal_id
  sql_attr_uint        = class_crc
  sql_attr_multi       = uint subclass_crcs from field
  sql_attr_uint        = sphinx_deleted

}

source tag_0_delta : tag_0_core
{
sql_query_pre    = 
sql_query_pre    = SET NAMES utf8

sql_query        = SELECT `tags`.`id` * 7 + 4 AS `id` , CAST(`tags`.`name` AS CHAR) AS `name`, CAST(GROUP_CONCAT(`polycos`.`object_type` SEPARATOR ' ') AS CHAR) AS `object_type`, GROUP_CONCAT(`polycos`.`object_id` SEPARATOR ',') AS `object_id`, `tags`.`id` AS `sphinx_internal_id`, 1002762595 AS `class_crc`, '1002762595' AS `subclass_crcs`, 0 AS `sphinx_deleted` FROM tags    LEFT OUTER JOIN `taggings` ON (`tags`.`id` = `taggings`.`tag_id` AND `taggings`.`tag_type` = 'Tag' AND `taggings`.`taggable_type` = 'Polyco')  LEFT OUTER JOIN `polycos` ON (`polycos`.`id` = `taggings`.`taggable_id`)  WHERE `tags`.`id` >= $start   AND `tags`.`id` <= $end    AND `tags`.`delta` = 1 GROUP BY `tags`.`id`  ORDER BY NULL
sql_query_range  = SELECT MIN(`id`), MAX(`id`) FROM `tags` WHERE `tags`.`delta` = 1
}

index tag_core
{
source = tag_0_core
path = /Users/nguma/Projects/nuniverse/db/sphinx/development/tag_core
  charset_type = utf-8
  morphology = stem_en
}
index tag_delta : tag_core
{
  source = tag_0_delta
  path = /Users/nguma/Projects/nuniverse/db/sphinx/development/tag_delta
}
index tag
{
  type = distributed
  local = tag_core
  local = tag_delta
}

source tagging_0_core
{
type     = mysql
sql_host = localhost
sql_user = nuniverse
sql_pass = wossname
sql_db   = nuniverse_dev



sql_query_pre    = SET NAMES utf8

sql_query_pre    = UPDATE `taggings` SET `delta` = 0
sql_query        = SELECT `taggings`.`id` * 7 + 5 AS `id` , CAST(CONCAT_WS(' ', `tags`.`name`, `nuniverses`.`name`, `stories`.`name`) AS CHAR) AS `predicate`, `taggings`.`id` AS `sphinx_internal_id`, 1796466879 AS `class_crc`, '1796466879' AS `subclass_crcs`, 0 AS `sphinx_deleted` FROM taggings    LEFT OUTER JOIN `tags` ON `tags`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'Tag'   LEFT OUTER JOIN `nuniverses` ON `nuniverses`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'Nuniverse'   LEFT OUTER JOIN `stories` ON `stories`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'Story'   LEFT OUTER JOIN `users` ON `users`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'User'   LEFT OUTER JOIN `facts` ON `facts`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'Fact'  WHERE `taggings`.`id` >= $start   AND `taggings`.`id` <= $end    AND `taggings`.`delta` = 0 GROUP BY `taggings`.`id`  ORDER BY NULL
sql_query_range  = SELECT MIN(`id`), MAX(`id`) FROM `taggings` WHERE `taggings`.`delta` = 0
sql_query_info   = SELECT * FROM `taggings` WHERE  `id` = (($id - 5) / 7)
sql_attr_uint        = sphinx_internal_id
  sql_attr_uint        = class_crc
  sql_attr_multi       = uint subclass_crcs from field
  sql_attr_uint        = sphinx_deleted

}

source tagging_0_delta : tagging_0_core
{
sql_query_pre    = 
sql_query_pre    = SET NAMES utf8

sql_query        = SELECT `taggings`.`id` * 7 + 5 AS `id` , CAST(CONCAT_WS(' ', `tags`.`name`, `nuniverses`.`name`, `stories`.`name`) AS CHAR) AS `predicate`, `taggings`.`id` AS `sphinx_internal_id`, 1796466879 AS `class_crc`, '1796466879' AS `subclass_crcs`, 0 AS `sphinx_deleted` FROM taggings    LEFT OUTER JOIN `tags` ON `tags`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'Tag'   LEFT OUTER JOIN `nuniverses` ON `nuniverses`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'Nuniverse'   LEFT OUTER JOIN `stories` ON `stories`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'Story'   LEFT OUTER JOIN `users` ON `users`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'User'   LEFT OUTER JOIN `facts` ON `facts`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'Fact'  WHERE `taggings`.`id` >= $start   AND `taggings`.`id` <= $end    AND `taggings`.`delta` = 1 GROUP BY `taggings`.`id`  ORDER BY NULL
sql_query_range  = SELECT MIN(`id`), MAX(`id`) FROM `taggings` WHERE `taggings`.`delta` = 1
}

index tagging_core
{
source = tagging_0_core
path = /Users/nguma/Projects/nuniverse/db/sphinx/development/tagging_core
  charset_type = utf-8
  morphology = stem_en
}
index tagging_delta : tagging_core
{
  source = tagging_0_delta
  path = /Users/nguma/Projects/nuniverse/db/sphinx/development/tagging_delta
}
index tagging
{
  type = distributed
  local = tagging_core
  local = tagging_delta
}

source user_0_core
{
type     = mysql
sql_host = localhost
sql_user = nuniverse
sql_pass = wossname
sql_db   = nuniverse_dev



sql_query_pre    = SET NAMES utf8

sql_query_pre    = UPDATE `users` SET `delta` = 0
sql_query        = SELECT `users`.`id` * 7 + 6 AS `id` , CAST(`users`.`login` AS CHAR) AS `identifier`, CAST(CONCAT_WS(' ', `users`.`firstname`, `users`.`lastname`) AS CHAR) AS `name`, CAST(GROUP_CONCAT(CONCAT_WS(' ', `tags`.`name`, `nuniverses`.`name`, `stories`.`name`) SEPARATOR ' ') AS CHAR) AS `tags`, IFNULL(CONCAT_WS(' ', `users`.`firstname`, `users`.`lastname`), '') AS `name_sort`, GROUP_CONCAT(`tags_users`.`id` SEPARATOR ',') AS `tag_ids`, GROUP_CONCAT(`contexts_users`.`id` SEPARATOR ',') AS `context_ids`, IFNULL(`users`.`state`, '') AS `state`, `users`.`id` AS `sphinx_internal_id`, 765557111 AS `class_crc`, '765557111' AS `subclass_crcs`, 0 AS `sphinx_deleted` FROM users    LEFT OUTER JOIN `taggings` ON `taggings`.taggable_id = `users`.id AND `taggings`.taggable_type = 'User'  LEFT OUTER JOIN `tags` ON `tags`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'Tag'   LEFT OUTER JOIN `nuniverses` ON `nuniverses`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'Nuniverse'   LEFT OUTER JOIN `stories` ON `stories`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'Story'   LEFT OUTER JOIN `users` tag_Users_taggings ON `tag_Users_taggings`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'User'   LEFT OUTER JOIN `facts` ON `facts`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'Fact'   LEFT OUTER JOIN `taggings` tags_users_join ON (`users`.`id` = `tags_users_join`.`taggable_id` AND `tags_users_join`.`taggable_type` = 'User' AND `tags_users_join`.`tag_type` = 'Tag')  LEFT OUTER JOIN `tags` tags_users ON (`tags_users`.`id` = `tags_users_join`.`tag_id`)   LEFT OUTER JOIN `taggings` contexts_users_join ON (`users`.`id` = `contexts_users_join`.`taggable_id` AND `contexts_users_join`.`taggable_type` = 'User' AND `contexts_users_join`.`tag_type` = 'Story')  LEFT OUTER JOIN `stories` contexts_users ON (`contexts_users`.`id` = `contexts_users_join`.`tag_id`)  WHERE `users`.`id` >= $start   AND `users`.`id` <= $end    AND `users`.`delta` = 0 GROUP BY `users`.`id`  ORDER BY NULL
sql_query_range  = SELECT MIN(`id`), MAX(`id`) FROM `users` WHERE `users`.`delta` = 0
sql_query_info   = SELECT * FROM `users` WHERE  `id` = (($id - 6) / 7)
sql_attr_str2ordinal = name_sort
  sql_attr_multi       = uint tag_ids from field
  sql_attr_multi       = uint context_ids from field
  sql_attr_str2ordinal = state
  sql_attr_uint        = sphinx_internal_id
  sql_attr_uint        = class_crc
  sql_attr_multi       = uint subclass_crcs from field
  sql_attr_uint        = sphinx_deleted

}

source user_0_delta : user_0_core
{
sql_query_pre    = 
sql_query_pre    = SET NAMES utf8

sql_query        = SELECT `users`.`id` * 7 + 6 AS `id` , CAST(`users`.`login` AS CHAR) AS `identifier`, CAST(CONCAT_WS(' ', `users`.`firstname`, `users`.`lastname`) AS CHAR) AS `name`, CAST(GROUP_CONCAT(CONCAT_WS(' ', `tags`.`name`, `nuniverses`.`name`, `stories`.`name`) SEPARATOR ' ') AS CHAR) AS `tags`, IFNULL(CONCAT_WS(' ', `users`.`firstname`, `users`.`lastname`), '') AS `name_sort`, GROUP_CONCAT(`tags_users`.`id` SEPARATOR ',') AS `tag_ids`, GROUP_CONCAT(`contexts_users`.`id` SEPARATOR ',') AS `context_ids`, IFNULL(`users`.`state`, '') AS `state`, `users`.`id` AS `sphinx_internal_id`, 765557111 AS `class_crc`, '765557111' AS `subclass_crcs`, 0 AS `sphinx_deleted` FROM users    LEFT OUTER JOIN `taggings` ON `taggings`.taggable_id = `users`.id AND `taggings`.taggable_type = 'User'  LEFT OUTER JOIN `tags` ON `tags`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'Tag'   LEFT OUTER JOIN `nuniverses` ON `nuniverses`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'Nuniverse'   LEFT OUTER JOIN `stories` ON `stories`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'Story'   LEFT OUTER JOIN `users` tag_Users_taggings ON `tag_Users_taggings`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'User'   LEFT OUTER JOIN `facts` ON `facts`.id = `taggings`.tag_id AND `taggings`.`tag_type` = 'Fact'   LEFT OUTER JOIN `taggings` tags_users_join ON (`users`.`id` = `tags_users_join`.`taggable_id` AND `tags_users_join`.`taggable_type` = 'User' AND `tags_users_join`.`tag_type` = 'Tag')  LEFT OUTER JOIN `tags` tags_users ON (`tags_users`.`id` = `tags_users_join`.`tag_id`)   LEFT OUTER JOIN `taggings` contexts_users_join ON (`users`.`id` = `contexts_users_join`.`taggable_id` AND `contexts_users_join`.`taggable_type` = 'User' AND `contexts_users_join`.`tag_type` = 'Story')  LEFT OUTER JOIN `stories` contexts_users ON (`contexts_users`.`id` = `contexts_users_join`.`tag_id`)  WHERE `users`.`id` >= $start   AND `users`.`id` <= $end    AND `users`.`delta` = 1 GROUP BY `users`.`id`  ORDER BY NULL
sql_query_range  = SELECT MIN(`id`), MAX(`id`) FROM `users` WHERE `users`.`delta` = 1
}

index user_core
{
source = user_0_core
path = /Users/nguma/Projects/nuniverse/db/sphinx/development/user_core
  charset_type = utf-8
  morphology = stem_en
}
index user_delta : user_core
{
  source = user_0_delta
  path = /Users/nguma/Projects/nuniverse/db/sphinx/development/user_delta
}
index user
{
  type = distributed
  local = user_core
  local = user_delta
}
